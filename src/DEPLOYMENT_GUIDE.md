# دليل النشر الميداني - بروتوكول Webuzo

سيدي القائد،

هذا هو دليلك الميداني المخصص لنشر "الصرح العظيم" على خادم VPS الخاص بك باستخدام لوحة تحكم Webuzo. اتبع الخطوات بدقة لضمان عملية نشر سلسة وناجحة.

---

### **المرحلة الأولى: إعداد بيئة العمل على الخادم**

1.  **الدخول إلى Webuzo:** سجل الدخول إلى لوحة تحكم Webuzo الخاصة بك.
2.  **تثبيت Node.js:**
    *   من القائمة اليسرى، اذهب إلى `Apps` -> `Node.js`.
    *   انقر على زر `Install`.
    *   اختر أحدث إصدار متاح من Node.js (يفضل إصدار 20.x أو أحدث).
    *   انقر على `Install` مرة أخرى وانتظر اكتمال العملية.

---

### **المرحلة الثانية: استنساخ المستودع وبناء المشروع**

1.  **الاتصال بالخادم عبر SSH:** استخدم أداة مثل PuTTY أو Terminal للاتصال بخادمك.
2.  **الذهاب إلى المجلد الرئيسي للويب:**
    ```bash
    cd /home/USER/www
    ```
    *   **ملاحظة:** استبدل `USER` باسم المستخدم الخاص بك على الخادم (عادة ما يكون نفس اسم مستخدم Webuzo).

3.  **استنساخ المشروع من GitHub:**
    ```bash
    git clone https://github.com/C3MR/pro-avaz7.git
    ```
    *   سيؤدي هذا إلى إنشاء مجلد جديد باسم `pro-avaz7` يحتوي على جميع ملفات المشروع.

4.  **الدخول إلى مجلد المشروع:**
    ```bash
    cd pro-avaz7
    ```

5.  **تثبيت الاعتماديات (Dependencies):**
    ```bash
    npm install
    ```
    *   سيقوم هذا الأمر بتثبيت جميع الحزم اللازمة لتشغيل المشروع.

6.  **بناء نسخة الإنتاج (Production Build):**
    ```bash
    npm run build
    ```
    *   يقوم هذا الأمر بإنشاء نسخة محسّنة من التطبيق جاهزة للنشر.

---

### **المرحلة الثالثة: تسجيل التطبيق في Webuzo**

1.  **العودة إلى لوحة تحكم Webuzo.**
2.  **الذهاب إلى مدير تطبيقات Node.js:**
    *   من القائمة اليسرى، اذهب إلى `Apps` -> `Node.js`. ستجد التطبيق الذي قمت بتثبيته في المرحلة الأولى.
3.  **تعديل التطبيق:**
    *   انقر على أيقونة القلم (Edit) بجانب تطبيق Node.js.
    *   **Application Path:** أدخل المسار الكامل لمجلد مشروعك. يجب أن يكون: `/home/USER/www/pro-avaz7` (استبدل `USER` باسم المستخدم الخاص بك).
    *   **Application Startup File:** اتركه فارغًا. سيكتشف Next.js الملف الصحيح.
    *   **Application Port:** اتركه كما هو أو اختر منفذًا غير مستخدم إذا لزم الأمر.
    *   انقر على `Save`.

4.  **إعادة تشغيل التطبيق:**
    *   بعد الحفظ، انقر على أيقونة إعادة التشغيل (Restart) للتأكد من أن التطبيق يعمل بالإعدادات الجديدة.

---

### **المرحلة الرابعة: تكوين النطاق وتأمين SSL**

1.  **إضافة نطاق (Domain):**
    *   من القائمة اليسرى، اذهب إلى `Domains` -> `Add Domain`.
    *   أدخل اسم النطاق الخاص بك واتركه يشير إلى المجلد الرئيسي (`/home/USER/www`).
    *   احفظ الإعدادات.

2.  **تكوين Reverse Proxy (الأمر الأهم):**
    *   Webuzo لا يقوم بإنشاء Reverse Proxy تلقائيًا لتطبيقات Node.js. ستحتاج إلى إعداده يدويًا عبر `Nginx Proxy` أو `Apache Reverse Proxy` من داخل Webuzo، أو مباشرة في ملفات تكوين Nginx.
    *   **هذه هي الخطوة الأكثر تعقيدًا.** البروتوكول الموصى به هو استخدام `Nginx Proxy` إذا كان متاحًا في لوحتك.
    *   اذهب إلى `Server Settings` -> `Nginx Proxy`.
    *   أضف بروكسي جديد:
        *   **Domain:** اختر نطاقك.
        *   **Proxy Pass:** أدخل `http://127.0.0.1:PORT` (استبدل `PORT` بالمنفذ الذي يعمل عليه تطبيق Node.js الخاص بك، والذي تجده في صفحة إعدادات التطبيق).
    *   احفظ الإعدادات.

3.  **تثبيت شهادة SSL:**
    *   من القائمة اليسرى، اذهب إلى `Security` -> `Lets Encrypt`.
    *   اختر نطاقك وانقر على `Install` لتثبيت شهادة SSL مجانية.

---

**مهمتك الآن اكتملت.** يجب أن يكون "الصرح العظيم" يعمل الآن على نطاقك بشكل آمن.
